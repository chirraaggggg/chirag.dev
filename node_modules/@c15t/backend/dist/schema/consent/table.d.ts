import type { Field } from '../../pkgs/data-model';
import type { C15TOptions } from '../../types';
/**
 * Generates the database table configuration for the consent entity.
 *
 * This function creates a schema definition that includes all standard consent fields
 * and any additional fields from plugins or configuration. The resulting schema is used
 * for database migrations, schema validation, and query building.
 *
 * @param options - c15t configuration options that may contain consent table customizations
 * @param consentFields - Additional fields from plugins to include in the consent table
 * @returns A complete table schema definition with fields, model name, and metadata
 *
 * @example
 * ```typescript
 * const consentTableSchema = getConsentTable(c15tOptions);
 * // Use the schema for migrations or data access
 * const migrationPlans = generateMigrations(consentTableSchema);
 * ```
 */
export declare function getConsentTable(options: C15TOptions, consentFields?: Record<string, Field>): {
    /**
     * The name of the consent table in the database, configurable through options
     */
    entityName: string;
    /**
     * The ID prefix for the consent table
     * Used to generate unique prefixed IDs for consents
     */
    entityPrefix: string;
    /**
     * The schema for the consent table
     */
    schema: import("zod").ZodObject<{
        id: import("zod").ZodString;
        subjectId: import("zod").ZodString;
        domainId: import("zod").ZodString;
        purposeIds: import("zod").ZodArray<import("zod").ZodString>;
        metadata: import("zod").ZodOptional<import("zod").ZodNullable<import("zod").ZodRecord<import("zod").ZodString, import("zod").ZodUnknown>>>;
        policyId: import("zod").ZodOptional<import("zod").ZodString>;
        ipAddress: import("zod").ZodOptional<import("zod").ZodNullable<import("zod").ZodString>>;
        userAgent: import("zod").ZodOptional<import("zod").ZodNullable<import("zod").ZodString>>;
        status: import("zod").ZodPrefault<import("zod").ZodEnum<{
            active: "active";
            withdrawn: "withdrawn";
            expired: "expired";
        }>>;
        withdrawalReason: import("zod").ZodOptional<import("zod").ZodNullable<import("zod").ZodString>>;
        givenAt: import("zod").ZodPrefault<import("zod").ZodDate>;
        validUntil: import("zod").ZodOptional<import("zod").ZodNullable<import("zod").ZodDate>>;
        isActive: import("zod").ZodPrefault<import("zod").ZodBoolean>;
    }, import("zod/v4/core").$strip>;
    /**
     * Field definitions for the consent table
     */
    fields: {
        /**
         * Reference to the subject who gave consent
         */
        subjectId: {
            type: string;
            required: boolean;
            fieldName: string;
            references: {
                model: string;
                field: string;
            };
        };
        /**
         * Reference to the domain this consent applies to
         */
        domainId: {
            type: string;
            required: boolean;
            fieldName: string;
            references: {
                model: string;
                field: string;
            };
        };
        /**
         * Array of consentPurpose IDs that this consent applies to
         * Represents the many-to-many relationship between consent and purposes
         */
        purposeIds: {
            type: string;
            required: boolean;
            fieldName: string;
        };
        /**
         * Additional metadata about the consent
         */
        metadata: {
            type: string;
            required: boolean;
            fieldName: string;
        };
        /**
         * Reference to the policy version that was accepted
         */
        policyId: {
            type: string;
            required: boolean;
            fieldName: string;
            references: {
                model: string;
                field: string;
            };
        };
        /**
         * IP address when consent was given
         */
        ipAddress: {
            type: string;
            required: boolean;
            fieldName: string;
        };
        /**
         * Subject agent information when consent was given
         */
        userAgent: {
            type: string;
            required: boolean;
            fieldName: string;
        };
        /**
         * Status of the consent (active, expired, withdrawn)
         * Default: 'active'
         */
        status: {
            type: string;
            defaultValue: () => string;
            required: boolean;
            fieldName: string;
        };
        /**
         * Reason for consentWithdrawal, if consent was withdrawn
         */
        withdrawalReason: {
            type: string;
            required: boolean;
            fieldName: string;
        };
        /**
         * When the consent was given
         * Automatically set to current time
         */
        givenAt: {
            type: string;
            defaultValue: () => Date;
            required: boolean;
            fieldName: string;
        };
        /**
         * When the consent expires
         * Calculated based on givenAt + expiresIn setting
         */
        validUntil: {
            type: string;
            required: boolean;
            fieldName: string;
            transform: {
                input: (val: Date | undefined, data: Record<string, unknown>) => Date | undefined;
            };
        };
        /**
         * Whether the consent is active
         * Default: true
         */
        isActive: {
            type: string;
            defaultValue: boolean;
            required: boolean;
            fieldName: string;
        };
    };
    /**
     * Execution order during migrations (lower numbers run first)
     * Consent table needs to be created after the subject, domain, and policy tables it references
     */
    order: number;
};
//# sourceMappingURL=table.d.ts.map