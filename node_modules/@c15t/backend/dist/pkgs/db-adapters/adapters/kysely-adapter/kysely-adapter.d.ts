import type { Kysely } from 'kysely';
import { type EntityName, type EntityTypeMap } from '../../../data-model';
import type { C15TOptions } from '../../../../types';
import { type Adapter } from '../..';
import type { Database, KyselyDatabaseType } from './types';
/**
 * Interface for where conditions in Kysely queries
 *
 * This interface defines the structure of query conditions used
 * in database operations. It supports various operators and connectors
 * for building complex query conditions.
 *
 * @typeParam EntityType - The entity type being queried
 */
export interface WhereCondition<EntityType extends EntityName> {
    /**
     * The field to apply the condition to
     */
    field: keyof EntityTypeMap[EntityType] | 'id';
    /**
     * The value to compare against
     */
    value: unknown;
    /**
     * The operator to use for comparison
     *
     * @default "="
     */
    operator?: 'in' | 'eq' | 'ne' | 'lt' | 'lte' | 'gt' | 'gte' | 'contains' | 'starts_with' | 'ends_with' | 'ilike' | '=';
    /**
     * The logical connector to use with previous conditions
     *
     * @default "AND"
     */
    connector?: 'AND' | 'OR';
}
/**
 * Configuration options for the Kysely adapter
 *
 * @example
 * ```typescript
 * const config: KyselyAdapterConfig = {
 *   type: 'postgres' // Explicitly set the database type
 * };
 * ```
 */
export interface KyselyAdapterConfig {
    /**
     * Database type to use with the adapter
     *
     * Setting this explicitly can override the auto-detected type
     * and can be necessary in some environments where detection fails.
     */
    type?: KyselyDatabaseType;
}
/**
 * Creates a c15t adapter for Kysely ORM
 *
 * This factory function creates an adapter that allows c15t to use Kysely ORM
 * as its database layer. It supports PostgreSQL, MySQL, SQLite, and MSSQL.
 *
 * @param db - The Kysely database instance
 * @param config - Optional configuration for the Kysely adapter
 * @returns A c15t adapter factory function
 *
 * @example
 * ```typescript
 * import { Kysely, PostgresDialect } from 'kysely';
 * import { Pool } from 'pg';
 * import { c15tInstance } from '@c15t/backend';
 * import { kyselyAdapter } from '@c15t/adapters/kysely';
 *
 * // Create a Postgres connection pool
 * const pool = new Pool({
 *   host: 'localhost',
 *   database: 'consent_db',
 *   user: 'postgres',
 *   password: 'password'
 * });
 *
 * // Create Kysely instance
 * const db = new Kysely({
 *   dialect: new PostgresDialect({ pool })
 * });
 *
 * // Create the c15t instance with Kysely adapter
 * const c15t = c15tInstance({
 *   storage: kyselyAdapter(db, { type: 'postgres' }),
 *   // Other c15t options...
 * });
 *
 * // Use in your application
 * export default c15tInstance.handler;
 * ```
 * @deprecated Will be removed in the next major version. Update to `@c15t/backend/v2`, view migration guide for more details.
 * @see https://c15t.com/docs/self-host/migrate-from-v1
 */
export declare const kyselyAdapter: (db: Kysely<Database>, config?: KyselyAdapterConfig) => (opts: C15TOptions) => Adapter;
//# sourceMappingURL=kysely-adapter.d.ts.map