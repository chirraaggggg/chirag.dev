import { Kysely } from 'kysely';
import type { C15TOptions } from '../../../../types';
import type { Database, KyselyDatabaseType } from './types';
/**
 * Creates a Kysely adapter from the provided configuration
 *
 * This function analyzes the database configuration in C15TOptions and creates
 * an appropriate Kysely instance with the correct dialect. It handles several
 * different configuration formats including:
 * - Direct Kysely instances
 * - Dialect configurations
 * - Raw database connections (SQLite, MySQL, PostgreSQL)
 * - Kysely dialect instances
 *
 * @param config - The c15t configuration options containing database settings
 * @returns An object containing the initialized Kysely instance and database type
 *
 * @example
 * ```typescript
 * // Using with a pre-configured Kysely instance
 * import { Kysely, PostgresDialect } from 'kysely';
 * import { Pool } from 'pg';
 * import { c15tInstance } from '@c15t/backend';
 *
 * // Create a Postgres connection pool
 * const pool = new Pool({
 *   host: 'localhost',
 *   database: 'consent_db',
 *   user: 'postgres',
 *   password: 'password'
 * });
 *
 * // Create Kysely instance
 * const db = new Kysely({
 *   dialect: new PostgresDialect({ pool })
 * });
 *
 * // Use in c15t configuration
 * const c15t = c15tInstance({
 *   database: { db, type: 'postgres' } // Pre-configured Kysely instance
 * });
 * ```
 *
 * @example
 * ```typescript
 * // Using with a direct connection pool
 * import { Pool } from 'pg';
 * import { c15tInstance } from '@c15t/backend';
 *
 * // Create a Postgres connection pool
 * const pool = new Pool({
 *   host: 'localhost',
 *   database: 'consent_db',
 *   user: 'postgres',
 *   password: 'password'
 * });
 *
 * // Pass the pool directly to c15t
 * const c15t = c15tInstance({
 *   database: pool // The adapter will detect it's a Postgres pool
 * });
 * ```
 *
 * @throws {Error} Will throw an error if the database configuration is invalid or if a connection cannot be established
 */
export declare const createKyselyAdapter: (config: C15TOptions) => Promise<{
    kysely: Kysely<Database> | null;
    databaseType: KyselyDatabaseType | null;
}>;
//# sourceMappingURL=dialect.d.ts.map