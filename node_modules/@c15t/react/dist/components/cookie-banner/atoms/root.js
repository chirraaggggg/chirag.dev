'use client';
import{Fragment as e,jsx as t,jsxs as o}from"react/jsx-runtime";import{forwardRef as r,useEffect as n,useState as a}from"react";import{createPortal as m}from"react-dom";import{LocalThemeContext as i}from"../../../context/theme-context.js";import{useConsentManager as l}from"../../../hooks/use-consent-manager.js";import{useStyles as s}from"../../../hooks/use-styles.js";import{useTextDirection as u}from"../../../hooks/use-text-direction.js";import c from"../cookie-banner.module.js";import{Overlay as d}from"./overlay.js";let f=({children:e,className:o,noStyle:r,disableAnimation:n,theme:a,scrollLock:m,trapFocus:l=!0,...s})=>t(i.Provider,{value:{disableAnimation:n,noStyle:r,theme:a,scrollLock:m,trapFocus:l},children:t(p,{disableAnimation:n,className:o,noStyle:r,...s,children:e})}),p=r(({asChild:r,children:i,className:f,style:p,className:b,disableAnimation:h,noStyle:N,...y},j)=>{let{showPopup:k,translationConfig:g}=l(),x=u(g.defaultLanguage),[C,v]=a(!1),[R,T]=a(!1),[B,L]=a(200);n(()=>{L(Number.parseInt(getComputedStyle(document.documentElement).getPropertyValue("--banner-animation-duration")||"200",10))},[]),n(()=>{if(k)if(R)v(!0);else{let e=setTimeout(()=>{v(!0),T(!0)},10);return()=>clearTimeout(e)}else if(T(!1),h)v(!1);else{let e=setTimeout(()=>{v(!1)},B);return()=>clearTimeout(e)}},[k,h,R,B]);let P=s("banner.root",{baseClassName:[c.root,"ltr"===x?c.bottomLeft:c.bottomRight],style:p,className:f||b,noStyle:N}),[S,V]=a(!1);if(n(()=>{V(!0)},[]),!S)return null;let $=N?P.className||"":`${P.className||""} ${C?c.bannerVisible:c.bannerHidden}`;return k?m(o(e,{children:[t(d,{}),t("div",{ref:j,...y,...P,className:$,"data-testid":"cookie-banner-root",dir:x,children:i})]}),document.body):null});p.displayName="CookieBannerRootChildren";let b=f;export{f as CookieBannerRoot,b as Root};