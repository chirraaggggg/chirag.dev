import{jsx as e}from"react/jsx-runtime";import{defaultTranslationConfig as n}from"c15t";import{describe as r,expect as o,test as t,vi as s}from"vitest";import{renderHook as a}from"vitest-browser-react";import{ConsentManagerProvider as i}from"../../providers/consent-manager-provider.js";import{useConsentManager as l}from"../use-consent-manager.js";s.mock("c15t",async()=>({...await s.importActual("c15t"),configureConsentManager:()=>({getCallbacks:()=>({}),setCallbacks:()=>({}),showConsentBanner:async()=>({ok:!0,data:{showConsentBanner:!0,jurisdiction:{code:"GDPR"},translations:{language:"en",translations:n.translations.en}},error:null,response:null}),setConsent:async()=>({ok:!0,data:{success:!0},error:null,response:null}),verifyConsent:async()=>({ok:!0,data:{valid:!0},error:null,response:null})})})),r("useConsentManager",()=>{t("returns consent state and methods when used within provider",()=>{let{result:n}=a(()=>l(),{wrapper:({children:n})=>e(i,{options:{mode:"offline",react:{noStyle:!1}},children:n})});o(n.current).toBeDefined(),o(typeof n.current.showPopup).toBe("boolean")}),t("provides manager object when configured",()=>{let{result:n}=a(()=>l(),{wrapper:({children:n})=>e(i,{options:{mode:"offline",react:{noStyle:!1}},children:n})});o(n.current.manager).toBeDefined()})});