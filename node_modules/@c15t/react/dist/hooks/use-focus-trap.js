'use client';
import{useEffect as e,useRef as t}from"react";function n(n,u){let o=t(null);e(()=>{if(!n||!u||!u.current)return;o.current=document.activeElement;let e=r(u.current);if(e.length>0)setTimeout(()=>{e[0]?.focus()},0);else if(-1!==u.current.tabIndex)try{u.current.focus()}catch{}let t=e=>{if("Tab"!==e.key||!u.current)return;let t=r(u.current);if(0===t.length)return;let n=t[0],o=t.at(-1);e.shiftKey&&document.activeElement===n?(e.preventDefault(),o?.focus()):e.shiftKey||document.activeElement!==o||(e.preventDefault(),n?.focus())};return document.addEventListener("keydown",t),()=>{document.removeEventListener("keydown",t),o.current&&"focus"in o.current&&setTimeout(()=>o.current?.focus(),0)}},[n,u])}function r(e){return Array.from(e.querySelectorAll('a[href]:not([disabled]),button:not([disabled]),textarea:not([disabled]),input:not([disabled]),select:not([disabled]),[contenteditable],[tabindex]:not([tabindex="-1"])')).filter(e=>e.offsetWidth>0&&e.offsetHeight>0)}export{n as useFocusTrap};