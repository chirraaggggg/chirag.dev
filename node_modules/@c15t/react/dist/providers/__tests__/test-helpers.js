import{jsx as n}from"react/jsx-runtime";import{beforeEach as e,vi as s}from"vitest";import{useConsentManager as o}from"../../index.js";function r(){let n=s.fn();window.fetch=n;let o=s.fn(),r=new Map;return e(()=>{r.clear()}),s.mock("c15t",async()=>({...await s.importActual("c15t"),configureConsentManager:e=>{o(e);let s=e.backendURL||"";if("c15t"===e.mode)return{getCallbacks:()=>e.callbacks,showConsentBanner:async()=>(r.has(s)||(n(`${s}/show-consent-banner`,{headers:{"Content-Type":"application/json"}}),r.set(s,!0)),{ok:!0,data:{showConsentBanner:!0},error:null,response:null}),setConsent:async()=>({ok:!0,data:{success:!0},error:null,response:null}),verifyConsent:async()=>({ok:!0,data:{valid:!0},error:null,response:null})};if("offline"===e.mode)return{getCallbacks:()=>e.callbacks,showConsentBanner:async()=>({ok:!0,data:{showConsentBanner:!0},error:null,response:null}),setConsent:async()=>({ok:!0,data:{success:!0},error:null,response:null}),verifyConsent:async()=>({ok:!0,data:{valid:!0},error:null,response:null})};if("custom"===e.mode&&"endpointHandlers"in e){let n=e.endpointHandlers;return{getCallbacks:()=>e.callbacks,showConsentBanner:async()=>n.showConsentBanner({}),setConsent:async e=>n.setConsent({body:e}),verifyConsent:async e=>n.verifyConsent({body:e})}}return{getCallbacks:()=>e.callbacks,showConsentBanner:async()=>({ok:!0,data:{showConsentBanner:!0},error:null,response:null}),setConsent:async()=>({ok:!0,data:{success:!0},error:null,response:null}),verifyConsent:async()=>({ok:!0,data:{valid:!0},error:null,response:null})}}})),{mockFetch:n,mockConfigureConsentManager:o}}let a=()=>n("div",{"data-testid":"consumer",children:o().showPopup?"Show":"Hide"});export{a as TestConsumer,r as setupMocks};