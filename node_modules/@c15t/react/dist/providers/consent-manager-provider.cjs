'use client';
"use strict";const __rslib_import_meta_url__="undefined"==typeof document?new(require("url".replace("",""))).URL("file:"+__filename).href:document.currentScript&&document.currentScript.src||new URL("main.js",document.baseURI).href;var __webpack_require__={};__webpack_require__.d=(e,n)=>{for(var a in n)__webpack_require__.o(n,a)&&!__webpack_require__.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:n[a]})},__webpack_require__.o=(e,n)=>Object.prototype.hasOwnProperty.call(e,n),__webpack_require__.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var __webpack_exports__={};__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{ConsentManagerProvider:()=>ConsentManagerProvider,clearConsentManagerCache:()=>clearConsentManagerCache});const jsx_runtime_namespaceObject=require("react/jsx-runtime"),external_c15t_namespaceObject=require("c15t"),external_react_namespaceObject=require("react"),consent_manager_context_cjs_namespaceObject=require("../context/consent-manager-context.cjs"),theme_context_cjs_namespaceObject=require("../context/theme-context.cjs"),use_color_scheme_cjs_namespaceObject=require("../hooks/use-color-scheme.cjs"),external_version_cjs_namespaceObject=require("../version.cjs"),storeCache=new Map,managerCache=new Map;function clearConsentManagerCache(){storeCache.clear(),managerCache.clear()}function generateCacheKey({mode:e,backendURL:n,endpointHandlers:a,storageConfig:t,enabled:r}){return`${e}:${n??"default"}:${a?"custom":"none"}:${t?.storageKey??"default"}:${!1===r?"disabled":"enabled"}`}function ConsentManagerProvider({children:e,options:n}){let{mode:a,backendURL:t,store:r={},translations:c,react:o={}}=n,{theme:s,disableAnimation:_=!1,scrollLock:i=!1,trapFocus:l=!0,colorScheme:g,noStyle:u=!1}=o,p=(0,external_react_namespaceObject.useMemo)(()=>"undefined"!=typeof window&&!!(("c15t"===a||"offline"===a)&&(t?.includes("c15t.dev")||t?.includes("c15t.cloud")||window.location.hostname.includes("c15t.dev")||window.location.hostname.includes("c15t.cloud"))),[a,t]),b=generateCacheKey({mode:a||"c15t",backendURL:t||"/api/c15t",endpointHandlers:"endpointHandlers"in n?n.endpointHandlers:void 0,storageConfig:n.storageConfig,enabled:n.enabled}),d=(0,external_react_namespaceObject.useMemo)(()=>{let e,c=managerCache.get(b);return c||(e="offline"===a?(0,external_c15t_namespaceObject.configureConsentManager)({mode:"offline",store:r,storageConfig:n.storageConfig}):"custom"===a&&"endpointHandlers"in n?(0,external_c15t_namespaceObject.configureConsentManager)({mode:"custom",endpointHandlers:n.endpointHandlers,store:r,storageConfig:n.storageConfig}):(0,external_c15t_namespaceObject.configureConsentManager)({mode:"c15t",backendURL:t||"/api/c15t",store:r,storageConfig:n.storageConfig}),managerCache.set(b,e),e)},[b,a,t,r,n]),m=(0,external_react_namespaceObject.useMemo)(()=>{let e=storeCache.get(b);if(e)return e;let t=(0,external_c15t_namespaceObject.createConsentManagerStore)(d,{unstable_googleTagManager:n.unstable_googleTagManager,config:{pkg:"@c15t/react",version:external_version_cjs_namespaceObject.version,mode:a||"Unknown"},enabled:n.enabled,ignoreGeoLocation:n.ignoreGeoLocation,initialGdprTypes:n.consentCategories,callbacks:n.callbacks,trackingBlockerConfig:n.trackingBlockerConfig,scripts:n.scripts,legalLinks:n.legalLinks,storageConfig:n.storageConfig,user:n.user,overrides:n.overrides,...r,isConsentDomain:p,initialTranslationConfig:c});return storeCache.set(b,t),t},[b,d,a,n.callbacks,n.unstable_googleTagManager,n.ignoreGeoLocation,n.consentCategories,n.trackingBlockerConfig,n.scripts,n.legalLinks,n.user,n.overrides,r,p,c,n.storageConfig]),[f,C]=(0,external_react_namespaceObject.useState)(()=>m?m.getState():{}),j=(0,external_react_namespaceObject.useRef)(!1);(0,external_react_namespaceObject.useEffect)(()=>{if(!m)return;let e=m.subscribe(C);if(!j.current){let e=m.getState();(0,external_react_namespaceObject.startTransition)(()=>{C(n=>n!==e?(j.current=!0,e):(j.current=!0,n))})}return e},[m]);let x=(0,external_react_namespaceObject.useMemo)(()=>({theme:s,noStyle:u,disableAnimation:_,scrollLock:i,trapFocus:l,colorScheme:g}),[s,u,_,i,l,g]);(0,use_color_scheme_cjs_namespaceObject.useColorScheme)(g);let k=(0,external_react_namespaceObject.useMemo)(()=>{if(!m)throw Error("Consent store must be initialized before creating context value");return{state:f,store:m,manager:d}},[f,m,d]);return(0,jsx_runtime_namespaceObject.jsx)(consent_manager_context_cjs_namespaceObject.ConsentStateContext.Provider,{value:k,children:(0,jsx_runtime_namespaceObject.jsx)(theme_context_cjs_namespaceObject.GlobalThemeContext.Provider,{value:x,children:e})})}for(var __webpack_i__ in exports.ConsentManagerProvider=__webpack_exports__.ConsentManagerProvider,exports.clearConsentManagerCache=__webpack_exports__.clearConsentManagerCache,__webpack_exports__)-1===["ConsentManagerProvider","clearConsentManagerCache"].indexOf(__webpack_i__)&&(exports[__webpack_i__]=__webpack_exports__[__webpack_i__]);Object.defineProperty(exports,"__esModule",{value:!0});