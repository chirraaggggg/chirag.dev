import{describe as e,expect as t,it as r}from"vitest";import{extractRelevantHeaders as o}from"./headers.js";e("extractRelevantHeaders",()=>{r("should extract all relevant headers when present",()=>{let e=new Headers;e.set("cf-ipcountry","US"),e.set("x-vercel-ip-country","GB"),e.set("x-amz-cf-ipcountry","DE"),e.set("x-country-code","FR"),e.set("x-vercel-ip-country-region","CA-ON"),e.set("x-region-code","WEST"),e.set("accept-language","en-US,en;q=0.9"),e.set("user-agent","Mozilla/5.0"),e.set("x-forwarded-host","example.com"),e.set("x-forwarded-for","127.0.0.1"),t(o(e)).toEqual({"cf-ipcountry":"US","x-vercel-ip-country":"GB","x-amz-cf-ipcountry":"DE","x-country-code":"FR","x-vercel-ip-country-region":"CA-ON","x-region-code":"WEST","accept-language":"en-US,en;q=0.9","user-agent":"Mozilla/5.0","x-c15t-country":"US","x-c15t-region":"CA-ON","x-forwarded-host":"example.com","x-forwarded-for":"127.0.0.1"})}),r("should only extract headers that are present",()=>{let e=new Headers;e.set("cf-ipcountry","US"),e.set("user-agent","Mozilla/5.0"),t(o(e)).toEqual({"cf-ipcountry":"US","user-agent":"Mozilla/5.0","x-c15t-country":"US"})}),r("should return empty object when no relevant headers are present",()=>{let e=new Headers;e.set("irrelevant-header","some-value"),t(o(e)).toEqual({})}),r("should handle empty Headers object",()=>{t(o(new Headers)).toEqual({})}),r("should add c15t headers when corresponding headers are present",()=>{let e=new Headers;e.set("cf-ipcountry","US"),e.set("x-vercel-ip-country","GB"),e.set("x-amz-cf-ipcountry","DE"),e.set("x-country-code","FR"),e.set("x-vercel-ip-country-region","CA-ON"),e.set("x-region-code","WEST"),t(o(e)).toMatchObject({"x-c15t-country":"US","x-c15t-region":"CA-ON"});let r=new Headers;r.set("x-country-code","FR"),t(o(r)).toMatchObject({"x-c15t-country":"FR"});let c=new Headers;c.set("x-region-code","WEST"),t(o(c)).toMatchObject({"x-c15t-region":"WEST"})})});