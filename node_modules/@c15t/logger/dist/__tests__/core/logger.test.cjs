"use strict";
var __webpack_exports__ = {};
const external_vitest_namespaceObject = require("vitest");
const levels_cjs_namespaceObject = require("../../core/levels.cjs");
const logger_cjs_namespaceObject = require("../../core/logger.cjs");
(0, external_vitest_namespaceObject.describe)('logger', ()=>{
    (0, external_vitest_namespaceObject.beforeEach)(()=>{
        external_vitest_namespaceObject.vi.spyOn(console, 'log').mockImplementation(()=>{});
        external_vitest_namespaceObject.vi.spyOn(console, 'warn').mockImplementation(()=>{});
        external_vitest_namespaceObject.vi.spyOn(console, 'error').mockImplementation(()=>{});
        external_vitest_namespaceObject.vi.spyOn(console, 'debug').mockImplementation(()=>{});
    });
    (0, external_vitest_namespaceObject.afterEach)(()=>{
        external_vitest_namespaceObject.vi.restoreAllMocks();
    });
    (0, external_vitest_namespaceObject.describe)('createLogger', ()=>{
        (0, external_vitest_namespaceObject.it)('should create a logger with all log level methods', ()=>{
            const logger = (0, logger_cjs_namespaceObject.createLogger)();
            for (const level of levels_cjs_namespaceObject.levels)(0, external_vitest_namespaceObject.expect)(typeof logger[level]).toBe('function');
        });
        (0, external_vitest_namespaceObject.it)('should respect disabled option', ()=>{
            const logger = (0, logger_cjs_namespaceObject.createLogger)({
                disabled: true
            });
            logger.error('This should not be logged');
            (0, external_vitest_namespaceObject.expect)(console.error).not.toHaveBeenCalled();
        });
        (0, external_vitest_namespaceObject.it)('should respect log level option', ()=>{
            const logger = (0, logger_cjs_namespaceObject.createLogger)({
                level: 'warn'
            });
            logger.error('This should be logged');
            logger.warn('This should be logged');
            logger.info('This should not be logged');
            logger.debug('This should not be logged');
            (0, external_vitest_namespaceObject.expect)(console.error).toHaveBeenCalled();
            (0, external_vitest_namespaceObject.expect)(console.warn).toHaveBeenCalled();
            (0, external_vitest_namespaceObject.expect)(console.log).not.toHaveBeenCalled();
            (0, external_vitest_namespaceObject.expect)(console.debug).not.toHaveBeenCalled();
        });
        (0, external_vitest_namespaceObject.it)('should use custom log handler when provided', ()=>{
            const customLog = external_vitest_namespaceObject.vi.fn();
            const logger = (0, logger_cjs_namespaceObject.createLogger)({
                log: customLog,
                level: 'debug'
            });
            logger.info('Info message');
            logger.error('Error message');
            logger.success('Success message');
            (0, external_vitest_namespaceObject.expect)(customLog).toHaveBeenCalledTimes(3);
            (0, external_vitest_namespaceObject.expect)(customLog).toHaveBeenCalledWith('info', 'Info message');
            (0, external_vitest_namespaceObject.expect)(customLog).toHaveBeenCalledWith('error', 'Error message');
            (0, external_vitest_namespaceObject.expect)(customLog).toHaveBeenCalledWith('info', 'Success message');
        });
        (0, external_vitest_namespaceObject.it)('should format messages with timestamp and level', ()=>{
            const logger = (0, logger_cjs_namespaceObject.createLogger)({
                level: 'error'
            });
            logger.error('Test message');
            (0, external_vitest_namespaceObject.expect)(console.error).toHaveBeenCalled();
            const mockedConsoleError = external_vitest_namespaceObject.vi.mocked(console.error);
            const firstCallArg = mockedConsoleError.mock.calls[0]?.[0];
            (0, external_vitest_namespaceObject.expect)(firstCallArg).toContain('ERROR');
            (0, external_vitest_namespaceObject.expect)(firstCallArg).toContain('[c15t]');
            (0, external_vitest_namespaceObject.expect)(firstCallArg).toContain('Test message');
            (0, external_vitest_namespaceObject.expect)(firstCallArg).toMatch(/\d{2}:\d{2}:\d{2}\.\d{3}/);
        });
        (0, external_vitest_namespaceObject.it)('should pass additional arguments to console methods', ()=>{
            const logger = (0, logger_cjs_namespaceObject.createLogger)({
                level: 'error'
            });
            const meta = {
                userId: 'user123'
            };
            logger.error('Error with meta', meta);
            (0, external_vitest_namespaceObject.expect)(console.error).toHaveBeenCalled();
            const mockedConsoleError = external_vitest_namespaceObject.vi.mocked(console.error);
            (0, external_vitest_namespaceObject.expect)(mockedConsoleError.mock.calls[0]?.[1]).toBe(meta);
        });
        (0, external_vitest_namespaceObject.it)('should use custom app name when provided', ()=>{
            const customAppName = 'test-app';
            const logger = (0, logger_cjs_namespaceObject.createLogger)({
                appName: customAppName,
                level: 'info'
            });
            logger.info('Test message with custom app name');
            (0, external_vitest_namespaceObject.expect)(console.log).toHaveBeenCalled();
            const mockedConsoleLog = external_vitest_namespaceObject.vi.mocked(console.log);
            const logMessage = mockedConsoleLog.mock.calls[0]?.[0];
            (0, external_vitest_namespaceObject.expect)(logMessage).toContain(`[${customAppName}]`);
            (0, external_vitest_namespaceObject.expect)(logMessage).not.toContain('[c15t]');
        });
    });
});
for(var __webpack_i__ in __webpack_exports__)exports[__webpack_i__] = __webpack_exports__[__webpack_i__];
Object.defineProperty(exports, '__esModule', {
    value: true
});
