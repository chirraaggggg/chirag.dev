import { StandardBody, StandardHeaders, StandardLazyRequest, StandardResponse } from '@orpc/standard-server';
import { ToEventIteratorOptions as ToEventIteratorOptions$1, ToEventStreamOptions as ToEventStreamOptions$1 } from '@orpc/standard-server-fetch';
import Stream, { Readable } from 'node:stream';
import { IncomingMessage, ServerResponse } from 'node:http';
import { Http2ServerRequest, Http2ServerResponse } from 'node:http2';

interface ToEventIteratorOptions extends ToEventIteratorOptions$1 {
}
declare function toEventIterator(stream: Readable, options?: ToEventIteratorOptions): AsyncIteratorObject<unknown | void, unknown | void, void> & AsyncGenerator<unknown | void, unknown | void, void>;
interface ToEventStreamOptions extends ToEventStreamOptions$1 {
}
declare function toEventStream(iterator: AsyncIterator<unknown | void, unknown | void, void>, options?: ToEventStreamOptions): Readable;

type NodeHttpRequest = (IncomingMessage | Http2ServerRequest) & {
    /**
     * Replace `req.url` with `req.originalUrl` when `req.originalUrl` is available.
     * This is useful for `express.js` middleware.
     */
    originalUrl?: string;
};
type NodeHttpResponse = ServerResponse | Http2ServerResponse;

interface ToStandardBodyOptions extends ToEventIteratorOptions {
}
declare function toStandardBody(req: NodeHttpRequest, options?: ToStandardBodyOptions): Promise<StandardBody>;
interface ToNodeHttpBodyOptions extends ToEventStreamOptions {
}
/**
 * @param body
 * @param headers - WARNING: The headers can be changed by the function and effects on the original headers.
 * @param options
 */
declare function toNodeHttpBody(body: StandardBody, headers: StandardHeaders, options?: ToNodeHttpBodyOptions): Readable | undefined | string;

declare function toStandardMethod(method: string | undefined): string;

declare function toStandardLazyRequest(req: NodeHttpRequest, res: NodeHttpResponse): StandardLazyRequest;

interface SendStandardResponseOptions extends ToNodeHttpBodyOptions {
}
declare function sendStandardResponse(res: NodeHttpResponse, standardResponse: StandardResponse, options?: SendStandardResponseOptions): Promise<void>;

declare function toAbortSignal(stream: Stream.Writable): AbortSignal;

declare function toStandardUrl(req: NodeHttpRequest): URL;

export { sendStandardResponse, toAbortSignal, toEventIterator, toEventStream, toNodeHttpBody, toStandardBody, toStandardLazyRequest, toStandardMethod, toStandardUrl };
export type { NodeHttpRequest, NodeHttpResponse, SendStandardResponseOptions, ToEventIteratorOptions, ToEventStreamOptions, ToNodeHttpBodyOptions, ToStandardBodyOptions };
