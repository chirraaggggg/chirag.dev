import { A as AnySchema, M as Migrator } from './index-DHGqocp-.js';
import { AbstractQuery } from './query/index.js';
import { Kysely } from 'kysely';

declare const sqlProviders: readonly ["sqlite", "cockroachdb", "mysql", "postgresql", "mssql"];
declare const noSqlProviders: readonly ["mongodb"];
declare const providers: readonly ["sqlite", "cockroachdb", "mysql", "postgresql", "mssql", "mongodb"];
type Provider = (typeof providers)[number];
type SQLProvider = (typeof sqlProviders)[number];
type NoSQLProvider = (typeof noSqlProviders)[number];

interface LibraryConfig<Schemas extends AnySchema[] = AnySchema[]> {
    namespace: string;
    /**
     * different versions of schemas (sorted in ascending order)
     */
    schemas: Schemas;
    /**
     * The initial version, it refers to the version of database **before** being initialized.
     *
     * You should not use this version number in your schemas.
     *
     * @defaultValue '0.0.0'
     */
    initialVersion?: string;
}
interface KyselyConfig {
    db: Kysely<any>;
    provider: SQLProvider;
    /**
     * Define how foreign keys are handled.
     *
     * - `foreign-keys`: rely on database's actual foreign keys.
     * - `fumadb`: rely on FumaDB's simple foreign key engine.
     *
     * When not specified, use `foreign-keys` except for MSSQL.
     */
    relationMode?: RelationMode;
}
type RelationMode = "foreign-keys" | "fumadb";

interface SettingsManagerConfig {
    models: {
        /**
         * unique table & collection name for library settings (binded to database)
         */
        settings: string;
    };
}
interface FumaDBAdapterContext extends LibraryConfig {
}
interface FumaDBAdapter {
    /**
     * Name of the adapter
     */
    name: string;
    /**
     * Generate ORM schema based on FumaDB Schema
     */
    generateSchema?: (this: FumaDBAdapterContext, schema: AnySchema, schemaName: string) => {
        code: string;
        path: string;
    };
    createORM(this: FumaDBAdapterContext, schema: AnySchema): AbstractQuery<AnySchema>;
    /**
     * Get current schema version, undefined if not initialized.
     */
    getSchemaVersion(this: FumaDBAdapterContext): Promise<string | undefined>;
    createMigrationEngine?: (this: FumaDBAdapterContext) => Migrator;
}
type FumaDBAdapterOptionsV1 = FumaDBAdapter;
declare function createAdapter(_version: "v1", options: FumaDBAdapterOptionsV1): FumaDBAdapter;

export { type FumaDBAdapter as F, type KyselyConfig as K, type LibraryConfig as L, type NoSQLProvider as N, type Provider as P, type RelationMode as R, type SQLProvider as S, type SettingsManagerConfig as a, type FumaDBAdapterContext as b, type FumaDBAdapterOptionsV1 as c, createAdapter as d, noSqlProviders as n, providers as p, sqlProviders as s };
