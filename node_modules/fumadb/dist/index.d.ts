import { A as AnySchema, M as Migrator, N as NameVariantsBuilder } from './index-DHGqocp-.js';
import { F as FumaDBAdapter, L as LibraryConfig } from './index-DG1OqO_B.js';
export { K as KyselyConfig, N as NoSQLProvider, P as Provider, R as RelationMode, S as SQLProvider, n as noSqlProviders, p as providers, s as sqlProviders } from './index-DG1OqO_B.js';
import { AbstractQuery } from './query/index.js';
import 'kysely';

type Last<T extends unknown[]> = T extends [...infer _, infer L] ? L : T[number];
interface FumaDB<Schemas extends AnySchema[] = AnySchema[]> {
    schemas: Schemas;
    adapter: FumaDBAdapter;
    /**
     * Shorthand for `orm()` latest schema version
     * @deprecated use `orm()` directly
     */
    readonly abstract: AbstractQuery<Last<Schemas>>;
    /**
     * Get current schema version
     */
    version: () => Promise<Schemas[number]["version"]>;
    orm: <V extends Schemas[number]["version"]>(version: V) => AbstractQuery<Extract<Schemas[number], {
        version: V;
    }>>;
    /**
     * Kysely & MongoDB only
     */
    createMigrator: () => Migrator;
    /**
     * ORM only
     */
    generateSchema: (version: Schemas[number]["version"] | "latest", name?: string) => {
        code: string;
        path: string;
    };
}
interface FumaDBFactory<Schemas extends AnySchema[]> {
    /**
     * A static type-checker
     */
    version: <T extends Schemas[number]["version"]>(target: T) => T;
    /**
     * Configure consumer-side integration
     */
    client: (adapter: FumaDBAdapter) => FumaDB<Schemas>;
    /**
     * Set name variants
     */
    names: NameVariantsBuilder<Schemas, FumaDBFactory<Schemas>>;
}
type InferFumaDB<Factory extends FumaDBFactory<any>> = Factory extends FumaDBFactory<infer Schemas> ? FumaDB<Schemas> : never;
type InferAbstractQuery<Factory extends FumaDB<any>, Version extends string> = Factory extends FumaDB<infer Schemas> ? AbstractQuery<Extract<Schemas[number], {
    version: Version;
}>> & {
    version: Version;
} : never;
declare function fumadb<Schemas extends AnySchema[]>(config: LibraryConfig<Schemas>): FumaDBFactory<Schemas>;

export { type FumaDB, type FumaDBFactory, type InferAbstractQuery, type InferFumaDB, LibraryConfig, fumadb };
